<script setup lang="ts">
import { useModalStore } from '~/stores/modalStore';

const { y } = useWindowScroll();

const route = useRoute();

const isCurrentLink = (path: string) => route.path === path;
const modalStore = useModalStore();
</script>

<template>
  <header class="header" :class="{ fix: y > 0 }">
    <div class="container">
      <div class="header-row">
        <div class="header-left">
          <a href="/" class="logo">
            <img src="/img/icons/logo.png" alt="Логотип" />
            <span>CATBIT.IO</span>
          </a>
          <div class="header-soc hide-mob">
            <a href="#">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
              >
                <g clip-path="url(#clip0_2100_113)">
                  <path
                    d="M19.5829 3.96915L19.5829 3.96912C19.9124 3.83044 20.2731 3.78261 20.6273 3.83061C20.9816 3.87861 21.3165 4.02068 21.5972 4.24203C21.8779 4.46339 22.0941 4.75594 22.2234 5.08923C22.3527 5.42252 22.3903 5.78437 22.3323 6.13712L22.3322 6.1373L20.0642 19.8943L20.0642 19.8947C19.7901 21.5475 17.97 22.5108 16.4393 21.6793L16.4392 21.6793C15.4166 21.1238 13.891 20.2644 12.5143 19.3645L12.5141 19.3643C12.1696 19.1389 11.4483 18.6519 10.8412 18.0819C10.5389 17.7981 10.244 17.4746 10.0403 17.1351C9.84136 16.8036 9.68465 16.3811 9.79611 15.9396L9.79626 15.939C9.84691 15.7394 9.96997 15.5321 10.0955 15.3491C10.23 15.1531 10.4049 14.9324 10.6058 14.6969C11.0081 14.2252 11.5389 13.6659 12.1179 13.0806C12.7062 12.4859 13.3532 11.8556 13.9776 11.2532C11.8776 12.7903 9.49123 14.4734 8.54092 15.052L8.54082 15.0521C7.98416 15.3908 7.52736 15.6103 7.10173 15.724C6.66256 15.8414 6.28087 15.8398 5.88683 15.7742C4.63019 15.5651 3.45549 15.2399 2.48637 14.8378L19.5829 3.96915ZM19.5829 3.96915L2.48287 11.1691L2.48283 11.1692M19.5829 3.96915L2.48283 11.1692M2.48283 11.1692C0.907583 11.8326 0.796555 14.137 2.4863 14.8378L2.48283 11.1692Z"
                    fill="none"
                    stroke="#8688AA"
                  />
                </g>
                <defs>
                  <clipPath id="clip0_2100_113">
                    <rect width="24" height="24" fill="none" />
                  </clipPath>
                </defs>
              </svg>
            </a>
            <a href="#">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="27"
                height="24"
                viewBox="0 0 27 24"
                fill="none"
              >
                <path
                  d="M1.62061 4H1.1101L1.12071 4.5104C1.21971 9.26988 2.45813 13.1459 4.77559 15.8396C7.10312 18.545 10.4696 20 14.6924 20H15.1572H15.6572V19.5V14.7162C18.1661 15.19 20.0792 17.1324 20.887 19.6526L20.9983 20H21.3631H25.6206H26.2762L26.1028 19.3678C25.032 15.4626 22.4285 13.0915 20.4459 11.9333C22.3517 10.5716 24.6162 7.98114 25.2135 4.58664L25.3167 4H24.721H20.8533H20.475L20.3721 4.36413C19.9753 5.76953 19.1854 7.11775 18.2158 8.14061C17.4132 8.9872 16.519 9.57918 15.6572 9.82432V4.5V4H15.1572H11.2895H10.7895V4.5V14.1952C8.77065 13.3364 6.34755 10.5875 6.22792 4.49019L6.21831 4H5.72802H1.62061Z"
                  fill="none"
                  stroke="#8688AA"
                />
              </svg>
            </a>
          </div>
        </div>
        <div class="mobile-wrapper">
          <ul class="header-menu">
            <li
              class="header-menu__item"
              :class="{ current: isCurrentLink('/') }"
            >
              <NuxtLink to="/" class="header-menu__link">Главная</NuxtLink>
            </li>
            <li
              class="header-menu__item"
              :class="{ current: isCurrentLink('/rules') }"
            >
              <NuxtLink to="rules" class="header-menu__link"
                >Правила обмена</NuxtLink
              >
            </li>
            <li
              class="header-menu__item"
              :class="{ current: isCurrentLink('/aml-rules') }"
            >
              <NuxtLink to="aml-rules" class="header-menu__link"
                >Правила AML</NuxtLink
              >
            </li>
            <li
              class="header-menu__item"
              :class="{ current: isCurrentLink('/reviews') }"
            >
              <NuxtLink to="reviews" class="header-menu__link">
                Отзывы
              </NuxtLink>
            </li>
            <li
              class="header-menu__item"
              :class="{ current: isCurrentLink('/partners') }"
            >
              <NuxtLink to="/partners" class="header-menu__link"
                >Партнерская программа</NuxtLink
              >
            </li>
          </ul>
          <div class="header-right show-mob">
            <a
              href="#"
              data-popup="#popup-login"
              class="btn btn-black header__btn"
              ><span>Войти</span></a
            >
            <a href="#" data-popup="#popup-register" class="btn header__btn"
              ><span>Регистрация</span></a
            >
          </div>
          <div class="header-soc show-mob">
            <a href="#">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
              >
                <g clip-path="url(#clip0_2100_113)">
                  <path
                    d="M19.5829 3.96915L19.5829 3.96912C19.9124 3.83044 20.2731 3.78261 20.6273 3.83061C20.9816 3.87861 21.3165 4.02068 21.5972 4.24203C21.8779 4.46339 22.0941 4.75594 22.2234 5.08923C22.3527 5.42252 22.3903 5.78437 22.3323 6.13712L22.3322 6.1373L20.0642 19.8943L20.0642 19.8947C19.7901 21.5475 17.97 22.5108 16.4393 21.6793L16.4392 21.6793C15.4166 21.1238 13.891 20.2644 12.5143 19.3645L12.5141 19.3643C12.1696 19.1389 11.4483 18.6519 10.8412 18.0819C10.5389 17.7981 10.244 17.4746 10.0403 17.1351C9.84136 16.8036 9.68465 16.3811 9.79611 15.9396L9.79626 15.939C9.84691 15.7394 9.96997 15.5321 10.0955 15.3491C10.23 15.1531 10.4049 14.9324 10.6058 14.6969C11.0081 14.2252 11.5389 13.6659 12.1179 13.0806C12.7062 12.4859 13.3532 11.8556 13.9776 11.2532C11.8776 12.7903 9.49123 14.4734 8.54092 15.052L8.54082 15.0521C7.98416 15.3908 7.52736 15.6103 7.10173 15.724C6.66256 15.8414 6.28087 15.8398 5.88683 15.7742C4.63019 15.5651 3.45549 15.2399 2.48637 14.8378L19.5829 3.96915ZM19.5829 3.96915L2.48287 11.1691L2.48283 11.1692M19.5829 3.96915L2.48283 11.1692M2.48283 11.1692C0.907583 11.8326 0.796555 14.137 2.4863 14.8378L2.48283 11.1692Z"
                    fill="none"
                    stroke="#8688AA"
                  />
                </g>
                <defs>
                  <clipPath id="clip0_2100_113">
                    <rect width="24" height="24" fill="none" />
                  </clipPath>
                </defs>
              </svg>
            </a>
            <a href="#">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="27"
                height="24"
                viewBox="0 0 27 24"
                fill="none"
              >
                <path
                  d="M1.62061 4H1.1101L1.12071 4.5104C1.21971 9.26988 2.45813 13.1459 4.77559 15.8396C7.10312 18.545 10.4696 20 14.6924 20H15.1572H15.6572V19.5V14.7162C18.1661 15.19 20.0792 17.1324 20.887 19.6526L20.9983 20H21.3631H25.6206H26.2762L26.1028 19.3678C25.032 15.4626 22.4285 13.0915 20.4459 11.9333C22.3517 10.5716 24.6162 7.98114 25.2135 4.58664L25.3167 4H24.721H20.8533H20.475L20.3721 4.36413C19.9753 5.76953 19.1854 7.11775 18.2158 8.14061C17.4132 8.9872 16.519 9.57918 15.6572 9.82432V4.5V4H15.1572H11.2895H10.7895V4.5V14.1952C8.77065 13.3364 6.34755 10.5875 6.22792 4.49019L6.21831 4H5.72802H1.62061Z"
                  fill="none"
                  stroke="#8688AA"
                />
              </svg>
            </a>
          </div>
        </div>
        <div class="header-right hide-mob">
          <a
            href="#"
            data-popup="#popup-login"
            class="btn btn-black header__btn"
          >
            <span>
              Войти
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="16"
                height="16"
                viewBox="0 0 16 16"
                fill="none"
              >
                <path
                  d="M11.2162 11.2206C10.863 11.5194 10.3861 11.2955 10.3552 10.8339C10.328 10.427 10.2991 9.92183 10.2788 9.37297L4.86325 9.14153C4.46772 9.12463 4.1217 8.8634 4.07534 8.47023C4.05866 8.32886 4.04727 8.17005 4.04727 7.99983C4.04727 7.82963 4.05866 7.67079 4.07534 7.52943C4.1217 7.13625 4.46772 6.87502 4.86325 6.85813L10.2788 6.62668C10.2991 6.07766 10.328 5.57232 10.3552 5.1653C10.3861 4.70365 10.8632 4.47965 11.2164 4.77855C11.5273 5.04166 11.9362 5.40979 12.4529 5.91678C13.3025 6.75033 13.7148 7.33374 13.9087 7.66685C14.0305 7.87605 14.0304 8.12277 13.9087 8.33198C13.7148 8.66505 13.3024 9.2484 12.4529 10.0821C11.9361 10.5893 11.5271 10.9575 11.2162 11.2206Z"
                  stroke="white"
                  stroke-linejoin="round"
                />
                <path
                  d="M11.3687 2.90909C11.3647 2.83445 11.3608 2.76226 11.3569 2.69257C11.3111 1.87116 10.7177 1.20771 9.89856 1.13094C9.16092 1.06181 8.10786 1 6.70032 1C5.2833 1 4.22557 1.06264 3.48726 1.13233C2.67526 1.20898 2.08653 1.86209 2.04074 2.6764C1.97869 3.77929 1.9099 5.55382 1.9099 8C1.9099 10.4462 1.97869 12.2207 2.04074 13.3236C2.08653 14.1379 2.67526 14.791 3.48726 14.8677C4.22557 14.9373 5.2833 15 6.70032 15C8.10786 15 9.16092 14.9382 9.89856 14.8691C10.7177 14.7923 11.3111 14.1288 11.3569 13.3074C11.3608 13.2377 11.3647 13.1656 11.3687 13.0909"
                  stroke="white"
                  stroke-linecap="round"
                />
              </svg>
            </span>
          </a>
          <a href="#" data-popup="#popup-register" class="btn header__btn">
            <span>
              Регистрация
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="17"
                height="16"
                viewBox="0 0 17 16"
                fill="none"
              >
                <g clip-path="url(#clip0_4004_4694)">
                  <path
                    d="M12.3024 15.3092C11.9482 15.2739 11.7195 14.9797 11.7041 14.6241C11.6928 14.3615 11.6813 13.9939 11.674 13.4925C11.1726 13.4852 10.805 13.4737 10.5424 13.4624C10.1868 13.447 9.89261 13.2183 9.85734 12.8641C9.84291 12.7189 9.83301 12.543 9.83301 12.3335C9.83301 12.124 9.84291 11.9481 9.85734 11.8029C9.89261 11.4487 10.1868 11.22 10.5424 11.2046C10.805 11.1933 11.1726 11.1818 11.674 11.1745C11.6813 10.6731 11.6928 10.3055 11.7041 10.0429C11.7195 9.68733 11.9482 9.3931 12.3024 9.35783C12.4476 9.3434 12.6235 9.3335 12.833 9.3335C13.0425 9.3335 13.2184 9.3434 13.3636 9.35783C13.7178 9.3931 13.9465 9.68733 13.9619 10.0429C13.9732 10.3055 13.9847 10.6731 13.992 11.1745C14.4934 11.1818 14.861 11.1933 15.1236 11.2046C15.4792 11.22 15.7734 11.4487 15.8087 11.8029C15.8231 11.9481 15.833 12.124 15.833 12.3335C15.833 12.543 15.8231 12.7189 15.8087 12.8641C15.7734 13.2183 15.4792 13.447 15.1236 13.4624C14.861 13.4737 14.4934 13.4852 13.992 13.4925C13.9847 13.9939 13.9732 14.3615 13.9619 14.6241C13.9465 14.9797 13.7178 15.2739 13.3636 15.3092C13.2184 15.3236 13.0425 15.3335 12.833 15.3335C12.6235 15.3335 12.4476 15.3236 12.3024 15.3092Z"
                    stroke="white"
                    stroke-linejoin="round"
                  />
                  <path
                    d="M8.16633 12.6381C7.60687 12.656 6.9466 12.6667 6.16757 12.6667C3.95467 12.6667 2.69976 12.5799 1.99277 12.4894C1.41452 12.4153 1.07935 11.9471 1.18845 11.3744C1.52393 9.61352 2.81164 8.18021 4.5091 7.60511C3.31673 6.99995 2.49963 5.76208 2.49963 4.33341C2.49963 2.30837 4.14127 0.666748 6.1663 0.666748C8.19133 0.666748 9.83297 2.30837 9.83297 4.33341C9.83297 5.76168 9.01633 6.99921 7.8245 7.60458C8.84997 7.95165 9.72597 8.61188 10.333 9.46835"
                    stroke="white"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                </g>
                <defs>
                  <clipPath id="clip0_4004_4694">
                    <rect
                      width="16"
                      height="16"
                      fill="white"
                      transform="translate(0.5)"
                    />
                  </clipPath>
                </defs>
              </svg>
            </span>
          </a>
        </div>
        <div class="burger show-mob">
          <span></span>
        </div>
      </div>
    </div>
    <div id="popup-register" class="popup">
      <span class="popup-close">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="12"
          height="12"
          viewBox="0 0 12 12"
          fill="none"
        >
          <g opacity="0.39" clip-path="url(#clip0_2348_4434)">
            <path
              d="M11.1755 0.192668C11.0038 0.099468 10.8256 0.104743 10.6668 0.159593C10.5113 0.213293 10.3704 0.315143 10.2552 0.424718C9.62812 1.02147 8.12212 2.46617 5.99997 4.57654C3.87787 2.46617 2.37184 1.02147 1.74477 0.424718C1.62964 0.315143 1.48869 0.213293 1.33322 0.159593C1.17434 0.104743 0.996167 0.099468 0.824467 0.192668C0.713842 0.252693 0.593117 0.340368 0.466717 0.466768C0.340342 0.593143 0.252667 0.713893 0.192617 0.824493C0.0994168 0.996193 0.104692 1.17439 0.159567 1.33327C0.213242 1.48874 0.315117 1.62967 0.424692 1.74482C1.02142 2.37189 2.46612 3.87792 4.57652 6.00004C2.46609 8.12222 1.02134 9.62824 0.424592 10.2553C0.315042 10.3705 0.213167 10.5114 0.159492 10.6669C0.104617 10.8258 0.0993418 11.0039 0.192542 11.1756C0.252592 11.2862 0.340267 11.407 0.466642 11.5334C0.593042 11.6597 0.713767 11.7474 0.824392 11.8075C0.996092 11.9007 1.17427 11.8954 1.33314 11.8405C1.48862 11.7868 1.62954 11.685 1.74469 11.5754C2.37177 10.9787 3.87782 9.53397 5.99999 7.42352C8.12217 9.53397 9.62822 10.9787 10.2553 11.5754C10.3704 11.685 10.5113 11.7868 10.6668 11.8405C10.8257 11.8954 11.0039 11.9007 11.1756 11.8075C11.2862 11.7474 11.4069 11.6597 11.5333 11.5334C11.6597 11.407 11.7474 11.2862 11.8074 11.1756C11.9006 11.0039 11.8954 10.8258 11.8405 10.6669C11.7868 10.5114 11.6849 10.3705 11.5754 10.2553C10.9786 9.62824 9.53392 8.12222 7.42347 6.00004C9.53384 3.87792 10.9786 2.37189 11.5753 1.74482C11.6849 1.62967 11.7867 1.48874 11.8404 1.33327C11.8953 1.17439 11.9006 0.996193 11.8073 0.824493C11.7473 0.713893 11.6596 0.593143 11.5332 0.466768C11.4069 0.340393 11.2861 0.252718 11.1755 0.192668Z"
              fill="white"
            />
          </g>
          <defs>
            <clipPath id="clip0_2348_4434">
              <rect width="12" height="12" fill="white" />
            </clipPath>
          </defs>
        </svg>
      </span>
      <div class="popup-inner">
        <form id="register" class="popup-form">
          <picture>
            <source srcset="/img/popup_bg.webp" type="image/webp" />
            <source srcset="/img/popup_bg.png" type="image/png" />
            <img class="popup__bg" src="/img/popup_bg.png" />
          </picture>
          <div class="popup__title">Регистрация</div>
          <div class="form-group">
            <div class="form-input">
              <input type="text" name="username" placeholder="Логин" />
            </div>
            <div class="form-input">
              <input type="email" name="email" placeholder="Email" />
            </div>
            <div class="form-input">
              <input type="password" name="password" placeholder="Пароль" />
            </div>
            <div class="form-input">
              <input
                type="password"
                name="confirm_password"
                placeholder="Подтвердить пароль"
              />
            </div>
          </div>
          <label class="popup-chk chk_label">
            <input type="checkbox" />
            <span></span>
            С правилами сервиса ознакомлен и согласен
          </label>
          <button class="btn popup__btn">
            <span>Зарегистрироваться</span>
          </button>
        </form>
      </div>
    </div>
    <div id="popup-login" class="popup">
      <span class="popup-close">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="12"
          height="12"
          viewBox="0 0 12 12"
          fill="none"
        >
          <g opacity="0.39" clip-path="url(#clip0_2348_4434)">
            <path
              d="M11.1755 0.192668C11.0038 0.099468 10.8256 0.104743 10.6668 0.159593C10.5113 0.213293 10.3704 0.315143 10.2552 0.424718C9.62812 1.02147 8.12212 2.46617 5.99997 4.57654C3.87787 2.46617 2.37184 1.02147 1.74477 0.424718C1.62964 0.315143 1.48869 0.213293 1.33322 0.159593C1.17434 0.104743 0.996167 0.099468 0.824467 0.192668C0.713842 0.252693 0.593117 0.340368 0.466717 0.466768C0.340342 0.593143 0.252667 0.713893 0.192617 0.824493C0.0994168 0.996193 0.104692 1.17439 0.159567 1.33327C0.213242 1.48874 0.315117 1.62967 0.424692 1.74482C1.02142 2.37189 2.46612 3.87792 4.57652 6.00004C2.46609 8.12222 1.02134 9.62824 0.424592 10.2553C0.315042 10.3705 0.213167 10.5114 0.159492 10.6669C0.104617 10.8258 0.0993418 11.0039 0.192542 11.1756C0.252592 11.2862 0.340267 11.407 0.466642 11.5334C0.593042 11.6597 0.713767 11.7474 0.824392 11.8075C0.996092 11.9007 1.17427 11.8954 1.33314 11.8405C1.48862 11.7868 1.62954 11.685 1.74469 11.5754C2.37177 10.9787 3.87782 9.53397 5.99999 7.42352C8.12217 9.53397 9.62822 10.9787 10.2553 11.5754C10.3704 11.685 10.5113 11.7868 10.6668 11.8405C10.8257 11.8954 11.0039 11.9007 11.1756 11.8075C11.2862 11.7474 11.4069 11.6597 11.5333 11.5334C11.6597 11.407 11.7474 11.2862 11.8074 11.1756C11.9006 11.0039 11.8954 10.8258 11.8405 10.6669C11.7868 10.5114 11.6849 10.3705 11.5754 10.2553C10.9786 9.62824 9.53392 8.12222 7.42347 6.00004C9.53384 3.87792 10.9786 2.37189 11.5753 1.74482C11.6849 1.62967 11.7867 1.48874 11.8404 1.33327C11.8953 1.17439 11.9006 0.996193 11.8073 0.824493C11.7473 0.713893 11.6596 0.593143 11.5332 0.466768C11.4069 0.340393 11.2861 0.252718 11.1755 0.192668Z"
              fill="white"
            />
          </g>
          <defs>
            <clipPath id="clip0_2348_4434">
              <rect width="12" height="12" fill="white" />
            </clipPath>
          </defs>
        </svg>
      </span>
      <div class="popup-inner">
        <form id="login" class="popup-form">
          <picture>
            <source srcset="/img/popup_bg.webp" type="image/webp" />
            <source srcset="/img/popup_bg.png" type="image/png" />
            <img class="popup__bg" src="/img/popup_bg.png" />
          </picture>
          <div class="popup__title">Авторизация</div>
          <div class="form-group">
            <div class="form-input">
              <input type="text" name="username" placeholder="Логин" />
            </div>
            <div class="form-input">
              <input type="password" name="password" placeholder="Пароль" />
            </div>
          </div>
          <div class="lost-pass">
            <a class="lost-pass__link" href="#">Не помню пароль</a>
          </div>
          <button class="btn popup__btn"><span>Войти</span></button>
        </form>
      </div>
    </div>
  </header>
</template>

<style lang="scss" scoped></style>
